<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Examples · KiteUtils.jl</title><meta name="title" content="Examples · KiteUtils.jl"/><meta property="og:title" content="Examples · KiteUtils.jl"/><meta property="twitter:title" content="Examples · KiteUtils.jl"/><meta name="description" content="Documentation for KiteUtils.jl."/><meta property="og:description" content="Documentation for KiteUtils.jl."/><meta property="twitter:description" content="Documentation for KiteUtils.jl."/><meta property="og:url" content="https://ufechner7.github.io/KiteUtils.jl/examples/"/><meta property="twitter:url" content="https://ufechner7.github.io/KiteUtils.jl/examples/"/><link rel="canonical" href="https://ufechner7.github.io/KiteUtils.jl/examples/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">KiteUtils.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../reference_frames/">Reference frames</a></li><li><a class="tocitem" href="../functions/">Exported Functions</a></li><li><a class="tocitem" href="../types/">Exported Types</a></li><li class="is-active"><a class="tocitem" href>Examples</a><ul class="internal"><li><a class="tocitem" href="#Create-a-test-project"><span>Create a test project</span></a></li><li><a class="tocitem" href="#Use-of-the-settings"><span>Use of the settings</span></a></li><li><a class="tocitem" href="#The-system-state,-type-SysState"><span>The system state, type SysState</span></a></li><li><a class="tocitem" href="#The-system-log"><span>The system log</span></a></li><li><a class="tocitem" href="#The-type-SysLog"><span>The type SysLog</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Examples</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Examples</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ufechner7/KiteUtils.jl/blob/main/docs/src/examples.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h1><h2 id="Create-a-test-project"><a class="docs-heading-anchor" href="#Create-a-test-project">Create a test project</a><a id="Create-a-test-project-1"></a><a class="docs-heading-anchor-permalink" href="#Create-a-test-project" title="Permalink"></a></h2><pre><code class="nohighlight hljs">mkdir test
cd test
julia --project</code></pre><p>and add KiteUtils to the project:</p><pre><code class="language-julia hljs">]activate .
add KiteUtils
&lt;BACKSPACE&gt;</code></pre><p>finally, copy the default configuration files to your new project:</p><pre><code class="language-julia hljs">using KiteUtils
copy_settings()</code></pre><h2 id="Use-of-the-settings"><a class="docs-heading-anchor" href="#Use-of-the-settings">Use of the settings</a><a id="Use-of-the-settings-1"></a><a class="docs-heading-anchor-permalink" href="#Use-of-the-settings" title="Permalink"></a></h2><pre><code class="language-julia hljs">using KiteUtils
const set = se()</code></pre><pre><code class="language-julia hljs">KiteUtils.Settings
  project: String &quot;settings.yaml&quot;
  log_file: String &quot;data/log_8700W_8ms&quot;
  model: String &quot;data/kite.obj&quot;
  segments: Int64 6
  sample_freq: Int64 20
  time_lapse: Float64 1.0
  zoom: Float64 0.03
  fixed_font: String &quot;&quot;
  v_reel_out: Float64 0.0
  c0: Float64 0.0
  c_s: Float64 2.59
  c2_cor: Float64 0.93
  k_ds: Float64 1.5
  area: Float64 10.18
  mass: Float64 6.2
  height_k: Float64 2.23
  alpha_cl: Array{Float64}((12,)) [-180.0, -160.0, -90.0, -20.0, -10.0, -5.0, 0.0, 20.0, 40.0, 90.0, 160.0, 180.0]
  cl_list: Array{Float64}((12,)) [0.0, 0.5, 0.0, 0.08, 0.125, 0.15, 0.2, 1.0, 1.0, 0.0, -0.5, 0.0]
  alpha_cd: Array{Float64}((11,)) [-180.0, -170.0, -140.0, -90.0, -20.0, 0.0, 20.0, 90.0, 140.0, 170.0, 180.0]
  cd_list: Array{Float64}((11,)) [0.5, 0.5, 0.5, 1.0, 0.2, 0.1, 0.2, 1.0, 0.5, 0.5, 0.5]
  ...
  l_bridle: Float64 33.4
  l_tether: Float64 392.0
  damping: Float64 473.0
  c_spring: Float64 614600.0
  elevation: Float64 70.7
  sim_time: Float64 100.0</code></pre><p>You can see the available setting parameters by typing <code>set.&lt;TAB&gt;&lt;TAB&gt;</code> at the Julia prompt. Defining <code>set</code> as constant improves the performance of the access to the  parameters. You can still change the values of the parameters, only the types are fixed.</p><h2 id="The-system-state,-type-SysState"><a class="docs-heading-anchor" href="#The-system-state,-type-SysState">The system state, type SysState</a><a id="The-system-state,-type-SysState-1"></a><a class="docs-heading-anchor-permalink" href="#The-system-state,-type-SysState" title="Permalink"></a></h2><p>The state of the kitepower system is captured in the struct <a href="../types/#KiteUtils.SysState"><code>SysState</code></a> .</p><pre><code class="language-julia hljs">julia&gt; using KiteUtils

julia&gt; st = demo_state(7)
time      [s]:       0.0
orient    [w,x,y,z]: Float32[0.5, 0.5, -0.5, -0.5]
elevation [rad]:     0.5404195
azimuth   [rad]:     0.0
l_tether  [m]:       0.0
v_reelout [m/s]:     0.0
force     [N]:       0.0
depower   [-]:       0.0
steering  [-]:       0.0
heading   [rad]:     0.0
course    [rad]:     0.0
v_app     [m/s]:     0.0
vel_kite  [m/s]:     Float32[0.0, 0.0, 0.0]
X         [m]:       Float32[0.0, 1.6666666, 3.3333333, 5.0, 6.6666665, 8.333333, 10.0]
Y         [m]:       Float32[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
Z         [m]:       Float32[0.0, 0.15380114, 0.6194867, 1.4100224, 2.5474184, 4.063342, 6.0000005]</code></pre><p>For simulation the time is since the start of the simulation, for flight logs the time is since launch.   You can access the fields of the state using the dot notation:</p><pre><code class="language-julia hljs">julia&gt; rad2deg(st.elevation)
30.963757f0</code></pre><p>The orientation is stored as unit quaternion (see: <a href="https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation">Quaterinos_and_spatial_rotation</a>).</p><p>If you need to work with rotations, use the package Rotatations.jl (see: <a href="https://github.com/JuliaGeometry/Rotations.jl">Rotations.jl</a>)   Example:</p><pre><code class="language-julia hljs">julia&gt; using Rotations

julia&gt; q = QuatRotation(st.orient)
3×3 QuatRotation{Float32} with indices SOneTo(3)×SOneTo(3)(Quaternion{Float32}(0.5, 0.5, -0.5, -0.5, true)):
  0.0  0.0  -1.0
 -1.0  0.0   0.0
  0.0  1.0   0.0</code></pre><p>The components X, Y and Z are vectors of the x, y and z positions of the tether particles. The last element of these vectors represents the kite position.</p><pre><code class="language-julia hljs">julia&gt; kite_pos = [st.X[end], st.Y[end], st.Z[end]]
3-element Vector{Float32}:
 10.0
  0.0
  6.0000005</code></pre><h2 id="The-system-log"><a class="docs-heading-anchor" href="#The-system-log">The system log</a><a id="The-system-log-1"></a><a class="docs-heading-anchor-permalink" href="#The-system-log" title="Permalink"></a></h2><p>The system log can be used to store the result of a simulation or of a test flight.  It stores an array of SysState structs, to be precise: a <a href="https://github.com/JuliaArrays/StructArrays.jl">StructArray</a> .</p><pre><code class="language-julia hljs">julia&gt; log=demo_log(7)
julia&gt; syslog=log.syslog</code></pre><p>You can acces this array by index:</p><pre><code class="language-julia hljs">syslog[end]
time      [s]:       10.0
orient    [w,x,y,z]: Float32[0.5, 0.5, -0.5, -0.5]
elevation [rad]:     0.64350116
azimuth   [rad]:     0.0
l_tether  [m]:       0.0
v_reelout [m/s]:     0.0
force     [N]:       0.0
depower   [-]:       0.0
steering  [-]:       0.0
heading   [rad]:     0.0
course    [rad]:     0.0
v_app     [m/s]:     0.0
vel_kite  [m/s]:     Float32[0.0, 0.0, 0.0]
X         [m]:       Float32[0.0, 1.6666666, 3.3333333, 5.0, 6.6666665, 8.333333, 10.0]
Y         [m]:       Float32[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
Z         [m]:       Float32[0.0, 0.15380114, 0.6194867, 1.4100224, 2.5474184, 4.063342, 6.0000005]
</code></pre><p>But you can also access the syslog component wise:</p><pre><code class="language-julia hljs">julia&gt; rad2deg.(syslog.elevation)
201-element Vector{Float64}:
  0.0
  0.17188759349740207
  0.343776734459538
  0.5156689836913548
  0.6875658486369466
  0.8594689568023267
  1.0313798022913758
  ⋮
 35.80299102537142
 36.01521524816747
 36.22800637666463
 36.44138148633583
 36.655340577181065
 36.86990072467326</code></pre><p>Note: To apply the function rad2deg on a vector the dot notation <code>rad2deg.</code> is used.</p><h2 id="The-type-SysLog"><a class="docs-heading-anchor" href="#The-type-SysLog">The type SysLog</a><a id="The-type-SysLog-1"></a><a class="docs-heading-anchor-permalink" href="#The-type-SysLog" title="Permalink"></a></h2><p>The type SysLog is a struct of a syslog as explained above and its name. In addition the properties x, y and z are defined, which represent the position of the kite over time.</p><pre><code class="language-julia hljs">julia&gt; log = demo_log(7)
SysLog{7}(&quot;Test_flight&quot;, SysState{7}[time      [s]:            0.0
orient    [QuatRotation]: Float32[0.0 0.0 -1.0; -1.0 0.0 0.0; 0.0 1.0 0.0]
x         [m]:            10.0
y         [m]:            0.0
z         [m]:            0.0
...</code></pre><p>You can acces the elements using the dot notation, for example an array of the values for the height:</p><pre><code class="nohighlight hljs">julia&gt; log.z
201-element Vector{Float32}:
 0.0
 0.030000001
 0.060000002
 0.09
 0.120000005
 0.15
 0.18
 ⋮
 5.8500004
 5.8800006
 5.9100003
 5.9400005
 5.9700003
 6.0000005</code></pre><p>This is useful for example for 2D plotting. Example:</p><pre><code class="language-julia hljs">using Plots
plot(log.syslog.time, log.z)</code></pre><p>This command creates a 2D plot of the height vs. the time. After the command <code>using Plots</code> you will be asked if you want to install the Plots package. Just press ENTER and it will get installed.</p><h3 id="Saving-and-exporting-log-files"><a class="docs-heading-anchor" href="#Saving-and-exporting-log-files">Saving and exporting log files</a><a id="Saving-and-exporting-log-files-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-and-exporting-log-files" title="Permalink"></a></h3><p>Saving a log file:</p><pre><code class="language-julia hljs">julia&gt; log = demo_log(7);
julia&gt; save_log(log)</code></pre><p>The semicolon at the end of the first line suppresses the output.</p><p>Exporting a log file in csv format:</p><pre><code class="language-julia hljs">julia&gt; log = demo_log(7);
julia&gt; export_log(log)</code></pre><p>By default the log file is save in the data folder. You can set a different folder as data folder with the function <strong>set<em>data</em>path</strong>. </p><pre><code class="language-julia hljs">julia&gt; log = demo_log(7);
julia&gt; set_data_path(tempdir())
julia&gt; export_log(log)</code></pre><p>Output on Linux:</p><pre><code class="language-julia hljs">&quot;/tmp/Test_flight.csv&quot;</code></pre><p>The output on Windows will be different because the default temporary directory is different.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../types/">« Exported Types</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Tuesday 6 August 2024 07:18">Tuesday 6 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
